(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc41aef"],{"1f5a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px"}},[a("div",[e._v("当前用户："+e._s(e.$store.state.user.name)+" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:e.handleToLogout}},[e._v("退出")])]),e.$store.state.user.isAdmin?a("div",[e._v("用户身份：管理员 "),a("a",{attrs:{href:"/admin",target:"_blank"}},[e._v("进入管理后台")])]):a("div",[e._v("用户身份：普通会员")]),a("div",[a("input",{attrs:{type:"file",name:"file",value:"上传头像"},on:{change:e.handleToUpload}}),a("img",{staticClass:"userHead",attrs:{src:e.$store.state.user.userHead}})])])},o=[],s=(a("b0c0"),a("c15a")),i=a("365c"),c={name:"center",methods:{handleToLogout:function(){var e=this;this.$api.users.logout().then((function(t){var a=t.data.status;0===a&&(localStorage.removeItem("name"),localStorage.removeItem("isAdmin"),e.$store.commit("user/USER_NAME",{name:"",isAdmin:!1,userHead:""}),e.$router.push("/mine/login"))}))},handleToUpload:function(e){var t=e.target.files[0],a=new FormData;a.append("file",t,t.name);var n={headers:{"Content-Type":"multipart/form-data"}},o=this;this.$api.users.uploadUserHead(a,n).then((function(e){var t=e.data.status;0===t?Object(s["a"])({title:"信息",content:"上传头像成功",ok:"确定",handleOk:function(){o.$store.commit("user/USER_NAME",{name:o.$store.state.user.name,isAdmin:o.$store.state.user.isAdmin,userHead:e.data.data.userHead+"?"+Math.random()})}}):Object(s["a"])({title:"信息",content:"上传头像失败",ok:"确定"})}))}},beforeRouteEnter:function(e,t,a){i["a"].users.getUser().then((function(e){var t=e.data.status;a(0===t?function(t){localStorage.setItem("name",e.data.data.username),localStorage.setItem("isAdmin",e.data.data.isAdmin),t.$store.commit("user/USER_NAME",{name:e.data.data.username,isAdmin:e.data.data.isAdmin,userHead:e.data.data.userHead})}:"/mine/login")})).catch((function(e){console.log(e)}))}},r=c,d=(a("e492"),a("2877")),l=Object(d["a"])(r,n,o,!1,null,"b7f7471e",null);t["default"]=l.exports},"3a97":function(e,t,a){},"73c8":function(e,t,a){},"75ce":function(e,t,a){"use strict";var n=a("3a97"),o=a.n(n);o.a},c15a:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"messageBox"},[a("h2",[e._v(e._s(e.title))]),a("p",[e._v(e._s(e.content))]),a("div",[e.cancel?a("div",{on:{touchstart:e.handleCancel}},[e._v(e._s(e.cancel))]):e._e(),e.ok?a("div",{on:{touchstart:e.handleOk}},[e._v(e._s(e.ok))]):e._e()])])},s=[],i={name:"alert"},c=i,r=(a("75ce"),a("2877")),d=Object(r["a"])(c,o,s,!1,null,"7b786ab5",null),l=d.exports,u=function(){return function(e){var t={title:"",content:"",cancel:"",ok:"",handleCancel:null,handleOk:null},a=n["default"].extend(l);for(var o in e)t[o]=e[o];var s=new a({el:document.createElement("div"),data:{title:t.title,content:t.content,cancel:t.cancel,ok:t.ok},methods:{handleCancel:function(){t.handleCancel&&t.handleCancel.call(this),document.body.removeChild(s.$el)},handleOk:function(){t.handleOk&&t.handleOk.call(this),document.body.removeChild(s.$el)}}});document.body.appendChild(s.$el)}}()},e492:function(e,t,a){"use strict";var n=a("73c8"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-1dc41aef.6310b4ec.js.map