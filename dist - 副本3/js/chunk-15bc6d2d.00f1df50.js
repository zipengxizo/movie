(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15bc6d2d"],{"02af":function(e,t,a){"use strict";var s=a("812e"),n=a.n(s);n.a},"1f5a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px"}},[a("div",[e._v("当前用户："+e._s(e.$store.state.user.name)+" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:e.handleToLogout}},[e._v("退出")])]),e.$store.state.user.isAdmin?a("div",[e._v("用户身份：管理员 "),a("a",{attrs:{href:"/admin",target:"_blank"}},[e._v("进入管理后台")])]):a("div",[e._v("用户身份：普通会员")]),a("div",[a("input",{attrs:{type:"file",name:"file",value:"上传头像"},on:{change:e.handleToUpload}}),a("img",{staticClass:"userHead",attrs:{src:e.$store.state.user.userHead}})])])},n=[],r=(a("b0c0"),a("c15a")),i=a("bc3a"),o=a.n(i),d={name:"center",methods:{handleToLogout:function(){var e=this;this.$api.users.logout().then((function(t){var a=t.data.status;0===a&&(localStorage.removeItem("name"),localStorage.removeItem("isAdmin"),e.$store.commit("user/USER_NAME",{name:"",isAdmin:!1,userHead:""}),e.$router.push("/mine/login"))}))},handleToUpload:function(e){var t=e.target.files[0],a=new FormData;a.append("file",t,t.name);var s={headers:{"Content-Type":"multipart/form-data"}},n=this;this.$api.users.uploadUserHead(a,s).then((function(e){var t=e.data.status;0===t?Object(r["messageBox"])({title:"信息",content:"上传头像成功",ok:"确定",handleOk:function(){n.$store.commit("user/USER_NAME",{name:n.$store.state.user.name,isAdmin:n.$store.state.user.isAdmin,userHead:e.data.data.userHead+"?"+Math.random()})}}):Object(r["messageBox"])({title:"信息",content:"上传头像失败",ok:"确定"})}))}},beforeRouteEnter:function(e,t,a){o.a.get("/api2/users/getUser").then((function(e){var t=e.data.status;a(0===t?function(t){localStorage.setItem("name",e.data.data.username),localStorage.setItem("isAdmin",e.data.data.isAdmin),t.$store.commit("user/USER_NAME",{name:e.data.data.username,isAdmin:e.data.data.isAdmin,userHead:e.data.data.userHead})}:"/mine/login")}))}},u=d,m=(a("02af"),a("2877")),c=Object(m["a"])(u,s,n,!1,null,"f4ff745e",null);t["default"]=c.exports},"812e":function(e,t,a){}}]);
//# sourceMappingURL=chunk-15bc6d2d.00f1df50.js.map